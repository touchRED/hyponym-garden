var seed = "building";

var gifUrl = "http://api.giphy.com/v1/gifs/search?q=" + seed + "&api_key=8lARF0cgG0lY6ZMfZ6n2GEYcoHvXg4WX";
var wordnikKey = "47dccf8be44d27e33e000095fc00800d910779b868e19b1dc";
// var wordnik = "http://api.wordnik.com:80/v4/word.json/" + seed + "/relatedWords?useCanonical=false&relationshipTypes=synonym&limitPerRelationshipType=10&api_key=" + wordnikKey;

var words = [];
var imgs = [];
var imgIndex = 0;

var currentImgElement;
var currentP;

var nextImgs;
var nextWord;

function setup(){
  noCanvas();
  if(window.location.hash.length > 1){
    seed = window.location.hash.slice(1);
    gifUrl = "http://api.giphy.com/v1/gifs/search?q=" + seed + "&api_key=8lARF0cgG0lY6ZMfZ6n2GEYcoHvXg4WX";
  }
  loadJSON(gifUrl, function(giphy){
    currentImgElement = createImg(giphy.data[0].images.downsized.url);
    console.log(giphy.data[0].images);
    currentP = createP(seed);
    words.push(seed);
    imgs.push(giphy.data)
    generateWord(seed, "synonym");
  });
}

function generateGiphyFunction(type){
  return function(giphy){
    if(giphy.data.length > 0){
      nextImgs = giphy.data
    }else{
      generateWord(words[words.length - 1], type);
    }
  }
}

function generateWordnikLink(word, type){
  return "http://api.wordnik.com:80/v4/word.json/" + word + "/relatedWords?useCanonical=false&relationshipTypes=" + type + "&limitPerRelationshipType=10&api_key=" + wordnikKey;
}

function generateWord(word, type){
  loadJSON(generateWordnikLink(word, type), function(data){
    if(data[0] && data[0].words && data[0].words.length > 0){
      nextWord = data[0].words[floor(random(data[0].words.length))];
    }else{
      nextWord = words[floor(random(words.length))];
    }
    gifUrl = "http://api.giphy.com/v1/gifs/search?q=" + nextWord + "&api_key=8lARF0cgG0lY6ZMfZ6n2GEYcoHvXg4WX";
    // wordnik = generateWordnikLink(nextWord, type);
    loadJSON(gifUrl, generateGiphyFunction(type));
  });
}

function mouseReleased(){
  return false;
}

function touchEnded(){
  if(winMouseX > 3 * window.innerWidth / 4){
    imgIndex = 0;
    currentImgElement.elt.src = nextImgs[0].images.downsized.url;
    currentP.elt.innerText = nextWord;
    imgs.push(nextImgs);
    words.push(nextWord);
    console.log(words);
    generateWord(nextWord, "synonym");
  }else if(winMouseX < window.innerWidth / 4){
    if(words.length > 1){
      words.pop();
      imgs.pop();
      imgIndex = 0;
    }
    currentImgElement.elt.src = imgs[imgs.length - 1][imgIndex].images.downsized.url;
    currentP.elt.innerText = words[words.length - 1];
    generateWord(words[words.length - 1], "synonym");
  }else{
    if(imgIndex < imgs[imgs.length - 1].length - 1){
      imgIndex++;
    }else{
      imgIndex = 0;
    }
    currentImgElement.elt.src = imgs[imgs.length - 1][imgIndex].images.downsized.url;
  }
  return false;
}



function keyPressed(){
  if(keyCode == RIGHT_ARROW){
    imgIndex = 0;
    currentImgElement.elt.src = nextImgs[0].images.downsized.url;
    currentP.elt.innerText = nextWord;
    imgs.push(nextImgs);
    words.push(nextWord);
    console.log(words);
    generateWord(nextWord, "synonym");
  }else if(keyCode == LEFT_ARROW){
    if(words.length > 1){
      words.pop();
      imgs.pop();
      imgIndex = 0;
    }
    currentImgElement.elt.src = imgs[imgs.length - 1][imgIndex].images.downsized.url;
    currentP.elt.innerText = words[words.length - 1];
    generateWord(words[words.length - 1], "synonym");
  }else if(keyCode == UP_ARROW){
    console.log("up");
  }else if(keyCode == DOWN_ARROW){
    console.log("down");
  }else if(keyCode == 32){
    if(imgIndex < imgs[imgs.length - 1].length - 1){
      imgIndex++;
    }else{
      imgIndex = 0;
    }
    currentImgElement.elt.src = imgs[imgs.length - 1][imgIndex].images.downsized.url;
  }
  return false;
}

// function generateWord("synonym"){
//   loadJSON(wordUrl, function(data){
//     var prop = Object.keys(data)[0];
//     if(data[prop].syn.length > 0){
//       word = data[prop].syn[floor(random(data[prop].syn.length))];
//     }else{
//       word = words[floor(random(words.length))];
//     }
//     words.push(word);
//     console.log(words);
//     gifUrl = "http://api.giphy.com/v1/gifs/search?q=" + word + "&api_key=8lARF0cgG0lY6ZMfZ6n2GEYcoHvXg4WX";
//     wordUrl = "http://words.bighugelabs.com/api/2/231b88a8bccc758fd2a4b00e60d1361d/" + word + "/json";
//     loadJSON(gifUrl, gotData);
//   });
// }

// function gotData(giphy){
//   if(giphy.data.length > 0){
//     nextImg = giphy.data[0].images.downsized.url
//   }else{
//     generateWord(type);
//   }
// }

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzZWVkID0gXCJidWlsZGluZ1wiO1xuXG52YXIgZ2lmVXJsID0gXCJodHRwOi8vYXBpLmdpcGh5LmNvbS92MS9naWZzL3NlYXJjaD9xPVwiICsgc2VlZCArIFwiJmFwaV9rZXk9OGxBUkYwY2dHMGxZNlpNZlo2bjJHRVljb0h2WGc0V1hcIjtcbnZhciB3b3JkbmlrS2V5ID0gXCI0N2RjY2Y4YmU0NGQyN2UzM2UwMDAwOTVmYzAwODAwZDkxMDc3OWI4NjhlMTliMWRjXCI7XG4vLyB2YXIgd29yZG5payA9IFwiaHR0cDovL2FwaS53b3JkbmlrLmNvbTo4MC92NC93b3JkLmpzb24vXCIgKyBzZWVkICsgXCIvcmVsYXRlZFdvcmRzP3VzZUNhbm9uaWNhbD1mYWxzZSZyZWxhdGlvbnNoaXBUeXBlcz1zeW5vbnltJmxpbWl0UGVyUmVsYXRpb25zaGlwVHlwZT0xMCZhcGlfa2V5PVwiICsgd29yZG5pa0tleTtcblxudmFyIHdvcmRzID0gW107XG52YXIgaW1ncyA9IFtdO1xudmFyIGltZ0luZGV4ID0gMDtcblxudmFyIGN1cnJlbnRJbWdFbGVtZW50O1xudmFyIGN1cnJlbnRQO1xuXG52YXIgbmV4dEltZ3M7XG52YXIgbmV4dFdvcmQ7XG5cbmZ1bmN0aW9uIHNldHVwKCl7XG4gIG5vQ2FudmFzKCk7XG4gIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoLmxlbmd0aCA+IDEpe1xuICAgIHNlZWQgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKTtcbiAgICBnaWZVcmwgPSBcImh0dHA6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMvc2VhcmNoP3E9XCIgKyBzZWVkICsgXCImYXBpX2tleT04bEFSRjBjZ0cwbFk2Wk1mWjZuMkdFWWNvSHZYZzRXWFwiO1xuICB9XG4gIGxvYWRKU09OKGdpZlVybCwgZnVuY3Rpb24oZ2lwaHkpe1xuICAgIGN1cnJlbnRJbWdFbGVtZW50ID0gY3JlYXRlSW1nKGdpcGh5LmRhdGFbMF0uaW1hZ2VzLmRvd25zaXplZC51cmwpO1xuICAgIGNvbnNvbGUubG9nKGdpcGh5LmRhdGFbMF0uaW1hZ2VzKTtcbiAgICBjdXJyZW50UCA9IGNyZWF0ZVAoc2VlZCk7XG4gICAgd29yZHMucHVzaChzZWVkKTtcbiAgICBpbWdzLnB1c2goZ2lwaHkuZGF0YSlcbiAgICBnZW5lcmF0ZVdvcmQoc2VlZCwgXCJzeW5vbnltXCIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVHaXBoeUZ1bmN0aW9uKHR5cGUpe1xuICByZXR1cm4gZnVuY3Rpb24oZ2lwaHkpe1xuICAgIGlmKGdpcGh5LmRhdGEubGVuZ3RoID4gMCl7XG4gICAgICBuZXh0SW1ncyA9IGdpcGh5LmRhdGFcbiAgICB9ZWxzZXtcbiAgICAgIGdlbmVyYXRlV29yZCh3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXSwgdHlwZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlV29yZG5pa0xpbmsod29yZCwgdHlwZSl7XG4gIHJldHVybiBcImh0dHA6Ly9hcGkud29yZG5pay5jb206ODAvdjQvd29yZC5qc29uL1wiICsgd29yZCArIFwiL3JlbGF0ZWRXb3Jkcz91c2VDYW5vbmljYWw9ZmFsc2UmcmVsYXRpb25zaGlwVHlwZXM9XCIgKyB0eXBlICsgXCImbGltaXRQZXJSZWxhdGlvbnNoaXBUeXBlPTEwJmFwaV9rZXk9XCIgKyB3b3JkbmlrS2V5O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVdvcmQod29yZCwgdHlwZSl7XG4gIGxvYWRKU09OKGdlbmVyYXRlV29yZG5pa0xpbmsod29yZCwgdHlwZSksIGZ1bmN0aW9uKGRhdGEpe1xuICAgIGlmKGRhdGFbMF0gJiYgZGF0YVswXS53b3JkcyAmJiBkYXRhWzBdLndvcmRzLmxlbmd0aCA+IDApe1xuICAgICAgbmV4dFdvcmQgPSBkYXRhWzBdLndvcmRzW2Zsb29yKHJhbmRvbShkYXRhWzBdLndvcmRzLmxlbmd0aCkpXTtcbiAgICB9ZWxzZXtcbiAgICAgIG5leHRXb3JkID0gd29yZHNbZmxvb3IocmFuZG9tKHdvcmRzLmxlbmd0aCkpXTtcbiAgICB9XG4gICAgZ2lmVXJsID0gXCJodHRwOi8vYXBpLmdpcGh5LmNvbS92MS9naWZzL3NlYXJjaD9xPVwiICsgbmV4dFdvcmQgKyBcIiZhcGlfa2V5PThsQVJGMGNnRzBsWTZaTWZaNm4yR0VZY29IdlhnNFdYXCI7XG4gICAgLy8gd29yZG5payA9IGdlbmVyYXRlV29yZG5pa0xpbmsobmV4dFdvcmQsIHR5cGUpO1xuICAgIGxvYWRKU09OKGdpZlVybCwgZ2VuZXJhdGVHaXBoeUZ1bmN0aW9uKHR5cGUpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlUmVsZWFzZWQoKXtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0b3VjaEVuZGVkKCl7XG4gIGlmKHdpbk1vdXNlWCA+IDMgKiB3aW5kb3cuaW5uZXJXaWR0aCAvIDQpe1xuICAgIGltZ0luZGV4ID0gMDtcbiAgICBjdXJyZW50SW1nRWxlbWVudC5lbHQuc3JjID0gbmV4dEltZ3NbMF0uaW1hZ2VzLmRvd25zaXplZC51cmw7XG4gICAgY3VycmVudFAuZWx0LmlubmVyVGV4dCA9IG5leHRXb3JkO1xuICAgIGltZ3MucHVzaChuZXh0SW1ncyk7XG4gICAgd29yZHMucHVzaChuZXh0V29yZCk7XG4gICAgY29uc29sZS5sb2cod29yZHMpO1xuICAgIGdlbmVyYXRlV29yZChuZXh0V29yZCwgXCJzeW5vbnltXCIpO1xuICB9ZWxzZSBpZih3aW5Nb3VzZVggPCB3aW5kb3cuaW5uZXJXaWR0aCAvIDQpe1xuICAgIGlmKHdvcmRzLmxlbmd0aCA+IDEpe1xuICAgICAgd29yZHMucG9wKCk7XG4gICAgICBpbWdzLnBvcCgpO1xuICAgICAgaW1nSW5kZXggPSAwO1xuICAgIH1cbiAgICBjdXJyZW50SW1nRWxlbWVudC5lbHQuc3JjID0gaW1nc1tpbWdzLmxlbmd0aCAtIDFdW2ltZ0luZGV4XS5pbWFnZXMuZG93bnNpemVkLnVybDtcbiAgICBjdXJyZW50UC5lbHQuaW5uZXJUZXh0ID0gd29yZHNbd29yZHMubGVuZ3RoIC0gMV07XG4gICAgZ2VuZXJhdGVXb3JkKHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdLCBcInN5bm9ueW1cIik7XG4gIH1lbHNle1xuICAgIGlmKGltZ0luZGV4IDwgaW1nc1tpbWdzLmxlbmd0aCAtIDFdLmxlbmd0aCAtIDEpe1xuICAgICAgaW1nSW5kZXgrKztcbiAgICB9ZWxzZXtcbiAgICAgIGltZ0luZGV4ID0gMDtcbiAgICB9XG4gICAgY3VycmVudEltZ0VsZW1lbnQuZWx0LnNyYyA9IGltZ3NbaW1ncy5sZW5ndGggLSAxXVtpbWdJbmRleF0uaW1hZ2VzLmRvd25zaXplZC51cmw7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cblxuZnVuY3Rpb24ga2V5UHJlc3NlZCgpe1xuICBpZihrZXlDb2RlID09IFJJR0hUX0FSUk9XKXtcbiAgICBpbWdJbmRleCA9IDA7XG4gICAgY3VycmVudEltZ0VsZW1lbnQuZWx0LnNyYyA9IG5leHRJbWdzWzBdLmltYWdlcy5kb3duc2l6ZWQudXJsO1xuICAgIGN1cnJlbnRQLmVsdC5pbm5lclRleHQgPSBuZXh0V29yZDtcbiAgICBpbWdzLnB1c2gobmV4dEltZ3MpO1xuICAgIHdvcmRzLnB1c2gobmV4dFdvcmQpO1xuICAgIGNvbnNvbGUubG9nKHdvcmRzKTtcbiAgICBnZW5lcmF0ZVdvcmQobmV4dFdvcmQsIFwic3lub255bVwiKTtcbiAgfWVsc2UgaWYoa2V5Q29kZSA9PSBMRUZUX0FSUk9XKXtcbiAgICBpZih3b3Jkcy5sZW5ndGggPiAxKXtcbiAgICAgIHdvcmRzLnBvcCgpO1xuICAgICAgaW1ncy5wb3AoKTtcbiAgICAgIGltZ0luZGV4ID0gMDtcbiAgICB9XG4gICAgY3VycmVudEltZ0VsZW1lbnQuZWx0LnNyYyA9IGltZ3NbaW1ncy5sZW5ndGggLSAxXVtpbWdJbmRleF0uaW1hZ2VzLmRvd25zaXplZC51cmw7XG4gICAgY3VycmVudFAuZWx0LmlubmVyVGV4dCA9IHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdO1xuICAgIGdlbmVyYXRlV29yZCh3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXSwgXCJzeW5vbnltXCIpO1xuICB9ZWxzZSBpZihrZXlDb2RlID09IFVQX0FSUk9XKXtcbiAgICBjb25zb2xlLmxvZyhcInVwXCIpO1xuICB9ZWxzZSBpZihrZXlDb2RlID09IERPV05fQVJST1cpe1xuICAgIGNvbnNvbGUubG9nKFwiZG93blwiKTtcbiAgfWVsc2UgaWYoa2V5Q29kZSA9PSAzMil7XG4gICAgaWYoaW1nSW5kZXggPCBpbWdzW2ltZ3MubGVuZ3RoIC0gMV0ubGVuZ3RoIC0gMSl7XG4gICAgICBpbWdJbmRleCsrO1xuICAgIH1lbHNle1xuICAgICAgaW1nSW5kZXggPSAwO1xuICAgIH1cbiAgICBjdXJyZW50SW1nRWxlbWVudC5lbHQuc3JjID0gaW1nc1tpbWdzLmxlbmd0aCAtIDFdW2ltZ0luZGV4XS5pbWFnZXMuZG93bnNpemVkLnVybDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGZ1bmN0aW9uIGdlbmVyYXRlV29yZChcInN5bm9ueW1cIil7XG4vLyAgIGxvYWRKU09OKHdvcmRVcmwsIGZ1bmN0aW9uKGRhdGEpe1xuLy8gICAgIHZhciBwcm9wID0gT2JqZWN0LmtleXMoZGF0YSlbMF07XG4vLyAgICAgaWYoZGF0YVtwcm9wXS5zeW4ubGVuZ3RoID4gMCl7XG4vLyAgICAgICB3b3JkID0gZGF0YVtwcm9wXS5zeW5bZmxvb3IocmFuZG9tKGRhdGFbcHJvcF0uc3luLmxlbmd0aCkpXTtcbi8vICAgICB9ZWxzZXtcbi8vICAgICAgIHdvcmQgPSB3b3Jkc1tmbG9vcihyYW5kb20od29yZHMubGVuZ3RoKSldO1xuLy8gICAgIH1cbi8vICAgICB3b3Jkcy5wdXNoKHdvcmQpO1xuLy8gICAgIGNvbnNvbGUubG9nKHdvcmRzKTtcbi8vICAgICBnaWZVcmwgPSBcImh0dHA6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMvc2VhcmNoP3E9XCIgKyB3b3JkICsgXCImYXBpX2tleT04bEFSRjBjZ0cwbFk2Wk1mWjZuMkdFWWNvSHZYZzRXWFwiO1xuLy8gICAgIHdvcmRVcmwgPSBcImh0dHA6Ly93b3Jkcy5iaWdodWdlbGFicy5jb20vYXBpLzIvMjMxYjg4YThiY2NjNzU4ZmQyYTRiMDBlNjBkMTM2MWQvXCIgKyB3b3JkICsgXCIvanNvblwiO1xuLy8gICAgIGxvYWRKU09OKGdpZlVybCwgZ290RGF0YSk7XG4vLyAgIH0pO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBnb3REYXRhKGdpcGh5KXtcbi8vICAgaWYoZ2lwaHkuZGF0YS5sZW5ndGggPiAwKXtcbi8vICAgICBuZXh0SW1nID0gZ2lwaHkuZGF0YVswXS5pbWFnZXMuZG93bnNpemVkLnVybFxuLy8gICB9ZWxzZXtcbi8vICAgICBnZW5lcmF0ZVdvcmQodHlwZSk7XG4vLyAgIH1cbi8vIH1cbiJdLCJmaWxlIjoibWFpbi5qcyJ9

//# sourceMappingURL=main.min.js.map
